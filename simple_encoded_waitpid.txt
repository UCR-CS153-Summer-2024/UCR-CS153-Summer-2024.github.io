#include "types.h"
#include "stat.h"
#include "user.h"

int main(void) {
    int child1_status;
    int child2_status;
    int child3_status;

    int child1_pid = fork();
    if (child1_pid < 0) {
        printf(1, "Fork failed\n");
        exit(-1);
    }

    if (child1_pid == 0) {
        // sleep(100);
        exit(0); 
    }

    int child2_pid = fork();
    if (child2_pid < 0) {
        printf(1, "Fork failed\n");
        exit(-1);
    }

    if (child2_pid == 0) {
        // sleep(100);
        exit(1); 
    }

    int child3_pid = fork();
    if (child3_pid < 0) {
        printf(1, "Fork failed\n");
        exit(-1);
    } 

    if (child3_pid == 0) {
        // sleep(100);
        exit(-1); 
    }

    // Parent process waits for specific child processes
    waitpid(child1_pid, &child1_status); // Wait for child 1
    waitpid(child2_pid, &child2_status); // Wait for child 2
    waitpid(child3_pid, &child3_status); // Wait for child 3

    printf(1, "%d %d %d\n", child1_status, child2_status, child3_status);

    exit(0);
}